import{_ as s,c as i,o as a,a2 as n}from"./chunks/framework.AHPLLXzo.js";const c=JSON.parse('{"title":"angular","description":"","frontmatter":{},"headers":[],"relativePath":"framework/angular.md","filePath":"framework/angular.md"}'),p={name:"framework/angular.md"},l=n(`<h1 id="angular" tabindex="-1">angular <a class="header-anchor" href="#angular" aria-label="Permalink to &quot;angular&quot;">â€‹</a></h1><h4 id="_1ã€åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥zone-js" tabindex="-1">1ã€åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥<code>zone.js</code> <a class="header-anchor" href="#_1ã€åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥zone-js" aria-label="Permalink to &quot;1ã€åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥\`zone.js\`&quot;">â€‹</a></h4><p>å¦‚æœä¸»åº”ç”¨é angularï¼Œé‚£ä¹ˆä¸»åº”ç”¨éœ€è¦å¼•å…¥<code>zone.js</code>æ‰èƒ½æ­£ç¡®åŠ è½½ angular å­åº”ç”¨ã€‚</p><p>æ­¥éª¤ 1ã€å®‰è£…ä¾èµ–</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm i zone.js </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">save</span></span></code></pre></div><p>æ­¥éª¤ 2ã€åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥ zone.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;zone.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h4 id="_2ã€è®¾ç½®è·¨åŸŸæ”¯æŒ" tabindex="-1">2ã€è®¾ç½®è·¨åŸŸæ”¯æŒ <a class="header-anchor" href="#_2ã€è®¾ç½®è·¨åŸŸæ”¯æŒ" aria-label="Permalink to &quot;2ã€è®¾ç½®è·¨åŸŸæ”¯æŒ&quot;">â€‹</a></h4><p>angular å®˜æ–¹è„šæ‰‹æ¶åˆ›å»ºçš„é¡¹ç›®åœ¨å¼€å‘ç¯å¢ƒä¸‹é»˜è®¤æ”¯æŒè·¨åŸŸè®¿é—®ï¼Œä¸éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚</p><p>å…¶å®ƒé¡¹ç›®åœ¨<code>webpack-dev-server</code>ä¸­æ·»åŠ  headersã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;Access-Control-Allow-Origin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_3ã€ç›‘å¬å¸è½½äº‹ä»¶" tabindex="-1">3ã€ç›‘å¬å¸è½½äº‹ä»¶ <a class="header-anchor" href="#_3ã€ç›‘å¬å¸è½½äº‹ä»¶" aria-label="Permalink to &quot;3ã€ç›‘å¬å¸è½½äº‹ä»¶&quot;">â€‹</a></h4><p>å­åº”ç”¨è¢«å¸è½½æ—¶ä¼šæ¥å—åˆ°ä¸€ä¸ªåä¸º<code>unmount</code>çš„äº‹ä»¶ï¼Œåœ¨æ­¤å¯ä»¥è¿›è¡Œå¸è½½ç›¸å…³æ“ä½œã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NgModuleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">platformBrowserDynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bootstrapModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AppModule)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NgModuleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬å¸è½½æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unmount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>å®Œæˆä»¥ä¸Šæ­¥éª¤å¾®å‰ç«¯å³å¯æ­£å¸¸æ¸²æŸ“ã€‚</p><h3 id="å¯é€‰è®¾ç½®" tabindex="-1">å¯é€‰è®¾ç½® <a class="header-anchor" href="#å¯é€‰è®¾ç½®" aria-label="Permalink to &quot;å¯é€‰è®¾ç½®&quot;">â€‹</a></h3><p>ä»¥ä¸‹é…ç½®æ˜¯é’ˆå¯¹å­åº”ç”¨çš„ï¼Œå®ƒä»¬æ˜¯å¯é€‰çš„ï¼Œå»ºè®®æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©è®¾ç½®ã€‚</p><h4 id="_1ã€å¼€å¯-umd-æ¨¡å¼-ä¼˜åŒ–å†…å­˜å’Œæ€§èƒ½" tabindex="-1">1ã€å¼€å¯ umd æ¨¡å¼ï¼Œä¼˜åŒ–å†…å­˜å’Œæ€§èƒ½ <a class="header-anchor" href="#_1ã€å¼€å¯-umd-æ¨¡å¼-ä¼˜åŒ–å†…å­˜å’Œæ€§èƒ½" aria-label="Permalink to &quot;1ã€å¼€å¯ umd æ¨¡å¼ï¼Œä¼˜åŒ–å†…å­˜å’Œæ€§èƒ½&quot;">â€‹</a></h4><p>MicroApp æ”¯æŒä¸¤ç§æ¸²æŸ“å¾®å‰ç«¯çš„æ¨¡å¼ï¼Œé»˜è®¤æ¨¡å¼å’Œ umd æ¨¡å¼ã€‚</p><ul><li>**é»˜è®¤æ¨¡å¼ï¼š**å­åº”ç”¨åœ¨åˆæ¬¡æ¸²æŸ“å’Œåç»­æ¸²æŸ“æ—¶ä¼šé¡ºåºæ‰§è¡Œæ‰€æœ‰ jsï¼Œä»¥ä¿è¯å¤šæ¬¡æ¸²æŸ“çš„ä¸€è‡´æ€§ã€‚</li><li>**umd æ¨¡å¼ï¼š**å­åº”ç”¨æš´éœ²å‡º<code>mount</code>ã€<code>unmount</code>æ–¹æ³•ï¼Œæ­¤æ—¶åªåœ¨åˆæ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œæ‰€æœ‰ jsï¼Œåç»­æ¸²æŸ“åªä¼šæ‰§è¡Œè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œåœ¨å¤šæ¬¡æ¸²æŸ“æ—¶å…·æœ‰æ›´å¥½çš„æ€§èƒ½å’Œå†…å­˜è¡¨ç°ã€‚</li></ul><p>å¦‚æœå­åº”ç”¨æ¸²æŸ“å’Œå¸è½½ä¸é¢‘ç¹ï¼Œé‚£ä¹ˆä½¿ç”¨é»˜è®¤æ¨¡å¼å³å¯ï¼Œå¦‚æœå­åº”ç”¨æ¸²æŸ“å’Œå¸è½½éå¸¸é¢‘ç¹å»ºè®®ä½¿ç”¨ umd æ¨¡å¼ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { NgModuleRef  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@angular/core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { platformBrowserDynamic } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@angular/platform-browser-dynamic&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { AppModule } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./app/app.module&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">declare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> global {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Window</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    microApp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    mount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CallableFunction</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    unmount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CallableFunction</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    __MICRO_APP_ENVIRONMENT__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NgModuleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ğŸ‘‡ å°†æ¸²æŸ“æ“ä½œæ”¾å…¥ mount å‡½æ•°ï¼Œå­åº”ç”¨åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  platformBrowserDynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bootstrapModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AppModule)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NgModuleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ğŸ‘‡ å°†å¸è½½æ“ä½œæ”¾å…¥ unmount å‡½æ•°ï¼Œå°±æ˜¯ä¸Šé¢æ­¥éª¤2ä¸­çš„å¸è½½å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unmount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // angularåœ¨éƒ¨åˆ†åœºæ™¯ä¸‹æ‰§è¡Œdestroyæ—¶ä¼šåˆ é™¤æ ¹å…ƒç´ app-rootï¼Œå¯¼è‡´åœ¨æ­¤æ¸²æŸ“æ—¶æŠ¥é”™ï¼Œæ­¤æ—¶å¯åˆ é™¤app.destroy()æ¥é¿å…è¿™ä¸ªé—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¦‚æœä¸åœ¨å¾®å‰ç«¯ç¯å¢ƒï¼Œåˆ™ç›´æ¥æ‰§è¡Œmountæ¸²æŸ“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.__MICRO_APP_ENVIRONMENT__) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2ã€è®¾ç½®-webpack-jsonpfunction" tabindex="-1">2ã€è®¾ç½® webpack.jsonpFunction <a class="header-anchor" href="#_2ã€è®¾ç½®-webpack-jsonpfunction" aria-label="Permalink to &quot;2ã€è®¾ç½® webpack.jsonpFunction&quot;">â€‹</a></h4><p>å¦‚æœå¾®å‰ç«¯æ­£å¸¸è¿è¡Œï¼Œåˆ™å¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥ã€‚</p><p>å¦‚æœå­åº”ç”¨èµ„æºåŠ è½½æ··ä¹±å¯¼è‡´æ¸²æŸ“å¤±è´¥ï¼Œå¯ä»¥å°è¯•è®¾ç½®<code>jsonpFunction</code>æ¥è§£å†³ï¼Œå› ä¸ºç›¸åŒçš„<code>jsonpFunction</code>åç§°ä¼šå¯¼è‡´èµ„æºæ±¡æŸ“ã€‚</p><p>è¿™ç§æƒ…å†µå¸¸è§äºä¸»åº”ç”¨å’Œå­åº”ç”¨éƒ½æ˜¯é€šè¿‡<code>create-react-app</code>ç­‰è„šæ‰‹æ¶åˆ›å»ºçš„ react é¡¹ç›®ï¼Œvue é¡¹ç›®ä¸­å¹¶ä¸å¸¸è§ã€‚</p><p><strong>è§£å†³æ–¹å¼ï¼šä¿®æ”¹å­åº”ç”¨çš„ webpack é…ç½®</strong></p><h4 id="webpack4" tabindex="-1">** webpack4 ** <a class="header-anchor" href="#webpack4" aria-label="Permalink to &quot;** webpack4 **&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  output: {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    jsonpFunction: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`webpackJsonp_è‡ªå®šä¹‰åç§°\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    globalObject: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;window&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="webpack5" tabindex="-1">** webpack5 ** <a class="header-anchor" href="#webpack5" aria-label="Permalink to &quot;** webpack5 **&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  output: {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chunkLoadingGlobal: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;webpackJsonp_è‡ªå®šä¹‰åç§°&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    globalObject: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;window&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_3ã€è®¾ç½®-publicpath" tabindex="-1">3ã€è®¾ç½® publicPath <a class="header-anchor" href="#_3ã€è®¾ç½®-publicpath" aria-label="Permalink to &quot;3ã€è®¾ç½® publicPath&quot;">â€‹</a></h4><p>å¦‚æœå­åº”ç”¨å‡ºç°é™æ€èµ„æºåœ°å€ 404(jsã€cssã€å›¾ç‰‡)ï¼Œå»ºè®®è®¾ç½®<code>publicPath</code>æ¥å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p><code>publicPath</code>æ˜¯ webpack æä¾›çš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è¡¥å…¨é™æ€èµ„æºçš„åœ°å€ï¼Œè¯¦æƒ…å‚è€ƒ webpack æ–‡æ¡£ <a href="https://webpack.docschina.org/guides/public-path/#on-the-fly" target="_blank" rel="noreferrer">publicPath</a></p><p><strong>æ­¥éª¤ 1:</strong> åœ¨å­åº”ç”¨ src ç›®å½•ä¸‹åˆ›å»ºåç§°ä¸º<code>public-path.ts</code>çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// __MICRO_APP_ENVIRONMENT__å’Œ__MICRO_APP_PUBLIC_PATH__æ˜¯ç”±micro-appæ³¨å…¥çš„å…¨å±€å˜é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (window.__MICRO_APP_ENVIRONMENT__) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // eslint-disable-next-line</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  __webpack_public_path__ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.__MICRO_APP_PUBLIC_PATH__;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>æ­¥éª¤ 2:</strong> åœ¨å­åº”ç”¨å…¥å£æ–‡ä»¶çš„<strong>æœ€é¡¶éƒ¨</strong>å¼•å…¥<code>public-path.ts</code></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// entry</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./public-path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h4 id="_4ã€åˆ‡æ¢åˆ°-iframe-æ²™ç®±" tabindex="-1">4ã€åˆ‡æ¢åˆ° iframe æ²™ç®± <a class="header-anchor" href="#_4ã€åˆ‡æ¢åˆ°-iframe-æ²™ç®±" aria-label="Permalink to &quot;4ã€åˆ‡æ¢åˆ° iframe æ²™ç®±&quot;">â€‹</a></h4><p>MicroApp æœ‰ä¸¤ç§æ²™ç®±æ–¹æ¡ˆï¼š<code>withæ²™ç®±</code>å’Œ<code>iframeæ²™ç®±</code>ã€‚</p><p>é»˜è®¤å¼€å¯ with æ²™ç®±ï¼Œå¦‚æœ with æ²™ç®±æ— æ³•æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥å°è¯•åˆ‡æ¢åˆ° iframe æ²™ç®±ã€‚</p><h2 id="å¸¸è§é—®é¢˜" tabindex="-1">å¸¸è§é—®é¢˜ <a class="header-anchor" href="#å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;å¸¸è§é—®é¢˜&quot;">â€‹</a></h2><h4 id="_1ã€é€šè¿‡-micro-app-æ•°æ®é€šä¿¡ä¿®æ”¹-angular-ç»„ä»¶æ•°æ®åè§†å›¾ä¸æ›´æ–°" tabindex="-1">1ã€é€šè¿‡ micro-app æ•°æ®é€šä¿¡ä¿®æ”¹ angular ç»„ä»¶æ•°æ®åè§†å›¾ä¸æ›´æ–° <a class="header-anchor" href="#_1ã€é€šè¿‡-micro-app-æ•°æ®é€šä¿¡ä¿®æ”¹-angular-ç»„ä»¶æ•°æ®åè§†å›¾ä¸æ›´æ–°" aria-label="Permalink to &quot;1ã€é€šè¿‡ micro-app æ•°æ®é€šä¿¡ä¿®æ”¹ angular ç»„ä»¶æ•°æ®åè§†å›¾ä¸æ›´æ–°&quot;">â€‹</a></h4><p>**åŸå› ï¼š**å› ä¸ºåœ¨ angular åŒºåŸŸå¤–è°ƒç”¨äº†å†…éƒ¨çš„ä»£ç (ä¸»åº”ç”¨å’Œå­åº”ç”¨å±äºä¸åŒçš„ angular åŒºåŸŸ)ï¼Œangular æ— æ³•çŸ¥é“çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p>**è§£å†³æ–¹å¼ï¼š**é€šè¿‡<code>ngZone.run()</code>è§¦å‘æ›´æ”¹æ£€æµ‹ï¼Œå…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š</p><p><img src="https://img14.360buyimg.com/imagetools/jfs/t1/207551/36/34684/49729/6523aee1F5efef0be/e50e6d782a223dc9.png" alt="angular-question3" title=":size=800"></p><h4 id="_2ã€ä¸»åº”ç”¨æ˜¯-reactã€nextjs-åº”ç”¨-å¼•å…¥-zone-js-åå¯¼è‡´-micro-app-å…ƒç´ ç”Ÿå‘½å‘¨æœŸå¼‚å¸¸" tabindex="-1">2ã€ä¸»åº”ç”¨æ˜¯ reactã€nextjs åº”ç”¨ï¼Œå¼•å…¥ zone.js åå¯¼è‡´ micro-app å…ƒç´ ç”Ÿå‘½å‘¨æœŸå¼‚å¸¸ <a class="header-anchor" href="#_2ã€ä¸»åº”ç”¨æ˜¯-reactã€nextjs-åº”ç”¨-å¼•å…¥-zone-js-åå¯¼è‡´-micro-app-å…ƒç´ ç”Ÿå‘½å‘¨æœŸå¼‚å¸¸" aria-label="Permalink to &quot;2ã€ä¸»åº”ç”¨æ˜¯ reactã€nextjs åº”ç”¨ï¼Œå¼•å…¥ zone.js åå¯¼è‡´ micro-app å…ƒç´ ç”Ÿå‘½å‘¨æœŸå¼‚å¸¸&quot;">â€‹</a></h4><p>ç›®å‰æ— æ³•è§£å†³ï¼Œè¯·æš‚åœä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p>`,48),h=[l];function t(k,e,r,d,E,o){return a(),i("div",null,h)}const y=s(p,[["render",t]]);export{c as __pageData,y as default};
